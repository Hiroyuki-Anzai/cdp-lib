/*!
 * cdp-lib.js 0.0.1
 *
 * Date: 2017-05-12T10:12:20.328Z
 */
module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=33)}([function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(15));__export(__webpack_require__(14))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(2));__export(__webpack_require__(17));__export(__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const fs=__webpack_require__(22);exports.fs=fs;const glob=__webpack_require__(23);exports.glob=glob;const hogan=__webpack_require__(29);exports.hogan=hogan;const _l=__webpack_require__(30);const _s=__webpack_require__(31);const which=__webpack_require__(27);exports.which=which;const uuid=__webpack_require__(26);exports.uuid=uuid;const chalk=__webpack_require__(20);exports.chalk=chalk;const semverRegex=__webpack_require__(25);exports.semverRegex=semverRegex;const cli_spinner_1=__webpack_require__(21);exports.Spinner=cli_spinner_1.Spinner;const $=(()=>{global.DOMParser=__webpack_require__(28).DOMParser;const _window=(()=>{const jsdom=__webpack_require__(24);if("function"===typeof jsdom.JSDOM){return(new jsdom.JSDOM).window}else{return jsdom.jsdom().defaultView}})();return __webpack_require__(32)(_window)})();exports.$=$;const _m=_l.mixin(_s.exports());exports._=_m},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=__webpack_require__(4);const libs_1=__webpack_require__(2);let _settings={force:false,verbose:false,silent:false,libPath:path.join(process.cwd(),"node_modules","cdp-lib"),lang:"en-US"};function getSettings(){return libs_1.$.extend({},_settings)}exports.getSettings=getSettings;function setSettings(settings){if(settings){_settings.force=settings.force||_settings.force;_settings.verbose=settings.verbose||_settings.verbose;_settings.silent=settings.silent||_settings.silent;_settings.libPath=settings.libPath||_settings.libPath;_settings.targetDir=settings.targetDir||_settings.targetDir;_settings.lang=settings.lang||_settings.lang}else{_settings={force:false,verbose:false,silent:false,libPath:path.join(process.cwd(),"node_modules","cdp-lib"),lang:"en-US"}}}exports.setSettings=setSettings;function getLibPath(){return _settings.libPath}exports.getLibPath=getLibPath;function getTargetDir(){return _settings.targetDir}exports.getTargetDir=getTargetDir;function log(message,...optionalParams){if(!_settings.silent){if(0<optionalParams.length){console.log(message,optionalParams)}else{console.log(message)}}}exports.log=log;function debug(message,...optionalParams){if(!_settings.silent&&_settings.verbose){if(0<optionalParams.length){console.error("DEBUG: "+message,optionalParams)}else{console.error("DEBUG: "+message)}}}exports.debug=debug;function assert(test,message,...optionalParams){if(!test){if(_settings.force){if(0<optionalParams.length){console.warn(message,optionalParams)}else{console.warn(message)}}else{if(0<optionalParams.length){console.error(message,optionalParams)}else{console.error(message)}process.exit(1)}}}exports.assert=assert;let _lang;function translate(key){if(!_lang){_lang=JSON.parse(libs_1.fs.readFileSync(path.join(_settings.libPath,"res/locales","messages."+_settings.lang+".json"),"utf8").toString())}let resouce=libs_1.$.extend({},_lang);const props=key.split(".");while(0<props.length){const prop=props.shift();if(resouce[prop]){resouce=resouce[prop]}else{assert(false,"resouce not found. key: "+key);return null}}return resouce}exports.translate=translate},function(module,exports){module.exports=require("path")},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const base_1=__webpack_require__(0);class GeneratorElectron extends base_1.GeneratorBase{defaultBaseStructure(){return{src:"app",pkg:"www/app",built:"app",doc:"docs",task:"tasks",test:"tests",types:"@types",srcConfig:{script:"scripts",stylesheet:"stylesheets",template:"templates"}}}create(config){return __awaiter(this,void 0,void 0,function*(){return Promise.reject("under construction.")})}}exports.GeneratorElectron=GeneratorElectron},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});const generator_electoron_1=__webpack_require__(5);__export(__webpack_require__(5));function newGeneratorDesktop(config){return new generator_electoron_1.GeneratorElectron(config)}exports.newGeneratorDesktop=newGeneratorDesktop},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const base_1=__webpack_require__(0);class GeneratorModule extends base_1.GeneratorBase{defaultBaseStructure(){return{src:"src",pkg:"dist",built:"built",doc:"docs",task:"tasks",test:"tests",types:"@types"}}create(config){return __awaiter(this,void 0,void 0,function*(){console.log("check.")})}}exports.GeneratorModule=GeneratorModule},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});const generator_module_1=__webpack_require__(7);__export(__webpack_require__(7));function newGeneratorLibrary(config){return new generator_module_1.GeneratorModule(config)}exports.newGeneratorLibrary=newGeneratorLibrary},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const base_1=__webpack_require__(0);class GeneratorCordova extends base_1.GeneratorBase{defaultBaseStructure(){return{src:"app",pkg:"www",built:"app",doc:"docs",task:"tasks",test:"tests",types:"@types"}}create(config){return __awaiter(this,void 0,void 0,function*(){return Promise.reject("under construction.")})}}exports.GeneratorCordova=GeneratorCordova},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});const generator_cordova_1=__webpack_require__(9);__export(__webpack_require__(9));function newGeneratorMobile(config){return new generator_cordova_1.GeneratorCordova(config)}exports.newGeneratorMobile=newGeneratorMobile},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const base_1=__webpack_require__(0);class GeneratorBrowser extends base_1.GeneratorBase{defaultBaseStructure(){return{src:"app",pkg:"www",built:"app",doc:"docs",task:"tasks",test:"tests",types:"@types"}}create(config){return __awaiter(this,void 0,void 0,function*(){return Promise.reject("under construction.")})}}exports.GeneratorBrowser=GeneratorBrowser},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});const generator_browser_1=__webpack_require__(11);__export(__webpack_require__(11));function newGeneratorWeb(config){return new generator_browser_1.GeneratorBrowser(config)}exports.newGeneratorWeb=newGeneratorWeb},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const Utils=__webpack_require__(1);exports.Utils=Utils;const generators_1=__webpack_require__(16);class CDPLib{static execute(config){Utils.setSettings(config.settings);console.log(JSON.stringify(config,null,4));return generators_1.newGenerator(config).run()}}exports.default=CDPLib},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const path=__webpack_require__(4);const utils_1=__webpack_require__(1);class GeneratorBase{constructor(_config){this._config=_config;this._projectRootDir=utils_1.getTargetDir()?utils_1.getTargetDir():path.join(process.cwd(),this._config.projectName);this._config.structureConfig=utils_1.$.extend({},this.defaultBaseStructure(),this._config.structureConfig)}run(){switch(this._config.action){case"create":return this.runCreate(this._config);default:return Promise.reject("unknown action: "+this._config.action)}}progress(key){}chdir(directory){process.chdir(directory)}get rootDir(){return this._projectRootDir}copyTplDir(target,dstRoot,options){dstRoot=dstRoot||this.rootDir;options=utils_1.$.extend({cwd:utils_1.templatePath(target),nodir:true,dot:true},options);utils_1.glob.sync("**",options).forEach(file=>{const dst=path.join(dstRoot,file.replace(/src/,this._config.structureConfig.src).replace(/pkg/,this._config.structureConfig.pkg).replace(/built/,this._config.structureConfig.built).replace(/doc/,this._config.structureConfig.doc).replace(/task/,this._config.structureConfig.task).replace(/test/,this._config.structureConfig.test).replace(/types/,this._config.structureConfig.types));utils_1.fs.copySync(path.join(utils_1.templatePath(target),file),dst)})}runCreate(config){return __awaiter(this,void 0,void 0,function*(){yield this.createBase();yield this.create(config)})}createBase(){return __awaiter(this,void 0,void 0,function*(){yield this.createProjectDir();yield this.copyBaseStructure();yield this.copyCommonFiles()})}createProjectDir(){utils_1.fs.mkdirsSync(this.rootDir)}copyBaseStructure(){this.copyTplDir("base/structure")}copyCommonFiles(){const srcDir=utils_1.templatePath("base");const dstDir=this.rootDir;utils_1.copyTpl(path.join(srcDir,".npmignore"),path.join(dstDir,".npmignore"),this._config.structureConfig);utils_1.fs.copySync(path.join(srcDir,"_BANNER"),path.join(dstDir,"BANNER"));switch(this._config.license){case"Apache-2.0":utils_1.fs.copySync(path.join(srcDir,"_LICENSE.Apache-2.0"),path.join(dstDir,".LICENSE"));break;case"MIT":utils_1.copyTpl(path.join(srcDir,"_LICENSE.MIT"),path.join(dstDir,".LICENSE"),this._config.copyright);break;default:break}utils_1.fs.copySync(path.join(srcDir,"_NOTICE"),path.join(dstDir,"NOTICE"))}}exports.GeneratorBase=GeneratorBase},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const Utils=__webpack_require__(1);exports.Utils=Utils},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});const settings_1=__webpack_require__(3);const library_1=__webpack_require__(8);const mobile_1=__webpack_require__(10);const desktop_1=__webpack_require__(6);const web_1=__webpack_require__(12);__export(__webpack_require__(0));__export(__webpack_require__(8));__export(__webpack_require__(10));__export(__webpack_require__(6));__export(__webpack_require__(12));function newGenerator(config){switch(config.projectKind){case"library":return library_1.newGeneratorLibrary(config);case"mobile":return mobile_1.newGeneratorMobile(config);case"desktop":return desktop_1.newGeneratorDesktop(config);case"web":return web_1.newGeneratorWeb(config);default:settings_1.assert(false,"unsupported project kind: "+config.projectKind);return null}}exports.newGenerator=newGenerator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=__webpack_require__(4);const os=__webpack_require__(19);const child_process_1=__webpack_require__(18);const libs_1=__webpack_require__(2);const settings_1=__webpack_require__(3);function handleError(error){settings_1.assert(false,error)}exports.handleError=handleError;function templatePath(target){if(null==target){return path.join(settings_1.getLibPath(),"templates")}else{return path.join(settings_1.getLibPath(),"templates",target)}}exports.templatePath=templatePath;function getSpinner(format,index){const fmt=format||"%s";const spinner=new libs_1.Spinner(fmt);const idx=null!=index&&0<=index&&index<10?index:Math.floor(Math.random()*9);spinner.setSpinnerString(libs_1.Spinner.spinners[idx]);return spinner}exports.getSpinner=getSpinner;function normalizeText(text,options){const opt=libs_1.$.extend({},{eol:os.EOL,bom:true},options);text=text.replace(/^\ufeff/gm,"").replace(/\r\n/gm,"\n").replace(/\r/gm,"\n");if(opt.bom){text="\ufeff"+text}if("\n"!==opt.eol){text=text.replace(/\n/gm,opt.eol)}if(opt.tab){const spaces=(()=>{let s="";for(let i=0;i<opt.tab;i++){s+=" "}return s})();text=text.replace(/\t/gm,spaces)}return text}exports.normalizeText=normalizeText;function execCommand(command,args,options){return new Promise((resolve,reject)=>{const opt=libs_1.$.extend({},{stdio:"inherit",spinner:{format:"%s"}},options);libs_1.which(command,(error,resolvedCommand)=>{if(error){handleError(JSON.stringify(error))}const spinner=opt.spinner?getSpinner(opt.spinner.format,opt.spinner.index):null;if(spinner){spinner.start()}child_process_1.spawn(resolvedCommand,args,opt).on("error",handleError).on("close",code=>{if(spinner){spinner.stop(true)}resolve(code)})})})}exports.execCommand=execCommand;function copyTpl(src,dst,params,options){const opt=libs_1.$.extend({},{eol:os.EOL,bom:true,delimiters:"{{ }}"},options);const jst=libs_1.hogan.compile(normalizeText(libs_1.fs.readFileSync(src).toString(),{eol:"\n",bom:false}),opt);const output=normalizeText(jst.render(params),opt);libs_1.fs.writeFileSync(dst,output,"utf8")}exports.copyTpl=copyTpl;function createGUID(){return"{"+libs_1.uuid.v4().toUpperCase()+"}"}exports.createGUID=createGUID;function str2XmlNode(str){return libs_1.$(libs_1.$.parseXML(str)).children()}exports.str2XmlNode=str2XmlNode;function formatXML(str,options){const opt=libs_1.$.extend({},{eol:os.EOL,bom:true,step:2},options);let xml="";let pad=0;let indent;let node;const strArr=normalizeText(str,{eol:"\n"}).replace(/(>)(<)(\/*)/g,"$1\n$2$3").split("\n");const spaces=len=>{let s="";const _indent=len*opt.step;for(let i=0;i<_indent;i++){s+=" "}return s};for(let i=0;i<strArr.length;i++){indent=0;node=libs_1.$.trim(strArr[i]);if(node.match(/.+<\/\w[^>]*>$/)){indent=0}else if(node.match(/^<\/\w/)){if(pad>0){pad-=1}}else if(node.match(/^<\w[^>]*[^\/]>.*$/)){indent=1}else{indent=0}xml+=spaces(pad)+node+opt.eol;pad+=indent}xml=xml.replace(/\n\n/gm,"\n");return normalizeText(xml,opt)}exports.formatXML=formatXML},function(module,exports){module.exports=require("child_process")},function(module,exports){module.exports=require("os")},function(module,exports){module.exports=require("chalk")},function(module,exports){module.exports=require("cli-spinner")},function(module,exports){module.exports=require("fs-extra")},function(module,exports){module.exports=require("glob")},function(module,exports){module.exports=require("jsdom")},function(module,exports){module.exports=require("semver-regex")},function(module,exports){module.exports=require("uuid")},function(module,exports){module.exports=require("which")},function(module,exports){module.exports=require("xmldom")},function(module,exports){module.exports=require("hogan.js")},function(module,exports){module.exports=require("lodash")},function(module,exports){module.exports=require("underscore.string")},function(module,exports){module.exports=require("jquery")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(13)}]);
//# sourceMappingURL=cdp-lib.min.js.map